<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Calling from Python · Vlasiator.jl</title><meta name="title" content="Calling from Python · Vlasiator.jl"/><meta property="og:title" content="Calling from Python · Vlasiator.jl"/><meta property="twitter:title" content="Calling from Python · Vlasiator.jl"/><meta name="description" content="Documentation for Vlasiator.jl."/><meta property="og:description" content="Documentation for Vlasiator.jl."/><meta property="twitter:description" content="Documentation for Vlasiator.jl."/><meta property="og:url" content="https://henry2004y.github.io/Vlasiator.jl/python/"/><meta property="twitter:url" content="https://henry2004y.github.io/Vlasiator.jl/python/"/><link rel="canonical" href="https://henry2004y.github.io/Vlasiator.jl/python/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Vlasiator.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../manual/">User Guide</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>Calling from Python</a><ul class="internal"><li><a class="tocitem" href="#JuliaCall"><span>JuliaCall</span></a></li><li><a class="tocitem" href="#PyJulia"><span>PyJulia</span></a></li></ul></li><li><a class="tocitem" href="../gallery/">Gallery</a></li><li><a class="tocitem" href="../benchmark/">Benchmarks</a></li><li><a class="tocitem" href="../internal/">API Reference</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li><li><a class="tocitem" href="../log/">FAQ</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Calling from Python</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Calling from Python</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/henry2004y/Vlasiator.jl/blob/master/docs/src/python.md#L" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Interoperability-Between-Julia-and-Python"><a class="docs-heading-anchor" href="#Interoperability-Between-Julia-and-Python">Interoperability Between Julia and Python</a><a id="Interoperability-Between-Julia-and-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Interoperability-Between-Julia-and-Python" title="Permalink"></a></h1><p>There are currently two ways to call Julia from Python and vice versa, which are described below. When converting from Julia to Python, there are two most important differences:</p><ol><li>Julia is column-major, while Python is row-major.</li><li>Julia adopts by default 1-based indexing, while Python adopts 0-based indexing.</li></ol><h2 id="JuliaCall"><a class="docs-heading-anchor" href="#JuliaCall">JuliaCall</a><a id="JuliaCall-1"></a><a class="docs-heading-anchor-permalink" href="#JuliaCall" title="Permalink"></a></h2><p>Vlasiator.jl can be called from Python via <a href="https://cjdoris.github.io/PythonCall.jl/dev/juliacall/">JuliaCall</a>. JuliaCall will link to the first Julia version in the system path. If Vlasiator.jl has been installed, we can use it directly; otherwise we need to state it in the <a href="https://cjdoris.github.io/PythonCall.jl/dev/juliacall/#juliacalldeps.json">juliacalldeps.json</a> file.</p><pre><code class="language-python hljs">from juliacall import Main as jl
jl.seval(&quot;using Vlasiator&quot;)
file = &quot;bulk.1d.vlsv&quot;
meta = jl.load(file)</code></pre><p>Matplotlib can then be used to visualize the data.</p><pre><code class="language-python hljs">from matplotlib import pyplot as plt
import numpy as np
rho = jl.readvariable(meta, &quot;proton/vg_rho&quot;)
x = np.arange(meta.coordmin[0], meta.coordmax[0], meta.dcoord[0])
plt.plot(x, rho)
plt.show()</code></pre><div class="admonition is-category-warn"><header class="admonition-header">Warn</header><div class="admonition-body"><p>There is an issue that JuliaCall may decide to check pkg installation every time for a new session. We need to first make sure that PythonCall is installed in Julia; then make sure your <code>PYTHONPATH</code> is properly set. See this <a href="https://github.com/cjdoris/PythonCall.jl/issues/144">issue</a> for more information.</p></div></div><h2 id="PyJulia"><a class="docs-heading-anchor" href="#PyJulia">PyJulia</a><a id="PyJulia-1"></a><a class="docs-heading-anchor-permalink" href="#PyJulia" title="Permalink"></a></h2><p>Vlasiator.jl can also be called from Python with the aid of <a href="https://pyjulia.readthedocs.io/en/latest/">PyJulia</a>. Following the installation steps described in the manual<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>, and then inside Python REPL:</p><pre><code class="language-python hljs"># Handling initialization issue for Conda
from julia.api import Julia
jl = Julia(compiled_modules=False)

from julia import Vlasiator
file = &quot;bulk1.0001000.vlsv&quot;
meta = Vlasiator.load(file)
var = &quot;proton/vg_rho&quot;
data = Vlasiator.readvariable(meta, var)</code></pre><p>To run a Julia script in Python,</p><pre><code class="language-python hljs"># Handling initialization issue for Conda
from julia.api import Julia
jl = Julia(compiled_modules=False)
jl.eval(&#39;include(&quot;examples/demo_2dplot_pyplot.jl&quot;)&#39;)
import matplotlib.pyplot as plt
plt.show()</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This approach is for you to have a taste of the package with a Python frontend. The workaround shown above for handling the static python libraries makes it slow for regular use. An alternative solution would be creating system images, but as of Julia 1.6 the user experience is not smooth. For better integrated experience with its full power, it is recommended to use the package inside Julia.</p></div></div><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>For Debian-based Linux distributions, it gets a little bit tricky. Please refer to <a href="https://pyjulia.readthedocs.io/en/latest/troubleshooting.html">Troubleshooting</a> for details.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><a class="docs-footer-nextpage" href="../gallery/">Gallery »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Sunday 7 January 2024 22:49">Sunday 7 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
